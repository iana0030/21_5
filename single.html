<!DOCTYPE html>
<html lang="da">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css?family=Abril+Fatface|Open+Sans&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Poiret+One&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/e1ee2b9569.js" crossorigin="anonymous"></script>

    <title>21-5 - Destinationer</title>
</head>

<body>
    <!-- html templates her -->
    <section id="splash"></section>

    <nav id="navbar">
        <div>
            <a href="index.html">
                <img src="logo.svg" alt="logo" id="logo">
            </a>
        </div>
        <ul class="nav_links">
            <li><a href="index.html">Forside</a></li>
            <li><a href="omkostninger.html">Priser</a>
            <li><a href="destinationer.html">Destinationer</a>
            <li><a href="omos.html">Om os</a>
            <li><a href="kontakt_info.html">Kontakt</a>
        </ul>
        <div class="burger">
            <div class="line1"></div>
            <div class="line2"></div>
            <div class="line3"></div>
        </div>
    </nav>

    <nav id="main_nav">

        <ul>
            <div>
                <a href="index.html">
                    <img src="logo.svg" alt="logo" id="logo">
                </a>
            </div>
            <li><a href="index.html">Forside</a></li>
            <li><a href="#">Priser</a>
                <ul class="submenu">
                    <li><a href=omkostninger.html> Alle priser</a></li>
                    <li><a href="pris_family.html"> Mere om Family priser</a></li>
                    <li><a href="pris_grande.html">Mere om Grande priser</a></li>
                    <li><a href="pris_large.html">Mere om Large priser</a></li>
                    <li><a href="gensalg.html">Gensalg af foreninger</a></li>
                    <li><a href="skat_jura_finans.html">Skat og Jura</a></li>
                    <li><a href="investering.html">Investering</a></li>
                </ul>
            </li>
            <li><a href="destinationer.html">Destinationer</a>

            </li>

            <li><a href="#">Om</a>
                <ul class="submenu">
                    <li><a href="omos.html">Om os</a></li>
                    <li><a href="hvem_er_vi.html">Hvem er vi?</a></li>
                    <li><a href="hvorfor.html">Hvorfor 21-5?</a></li>
                    <li><a href="hvordan.html">Hvordan fungerer det?</a></li>
                    <li><a href="hvad_gor_vi.html">Hvad gør vi?</a></li>
                    <li><a href="hvor_ligger_boligerne.html">Placering</a></li>
                    <li><a href="faq.html">Ofte stillede spørgsmål</a></li>
                </ul>
            </li>
            <li><a href="#">Kontakt</a>
                <ul class="submenu">
                    <li><a href="kontakt_info.html">Kontakt os</a></li>
                    <li><a href="orientering.html">Orienteringsmøde</a></li>
                </ul>
            </li>
            <li><a href="#">Familier & Foreninger</a>
                <ul class="submenu">
                    <li><a>Om familier og foreninger</a></li>
                    <li><a>Tidligere foreninger</a></li>
                    <li><a>Udtalelser</a></li>
                    <li><a>Tidligere benyttelse</a></li>
                </ul>
            </li>
        </ul>
    </nav>

    <header id="showcase"></header>


    <section class="detalje">
        <button id="destination_x">Tilbage</button>
        <article id="destinationer">
            <h1></h1>
            <h3></h3>
            <p></p>
            <h3></h3>
            <p></p>
            <img src="" alt="">
        </article>
    </section>
    <button onclick="topFunction()" id="myBtn" title="Go to top"><i class="far fa-arrow-alt-circle-up"></i></button>

    <section class="carousel_section">
        <h2 class="carousel_title"></h2>
        <p class="carousel_content"></p>
        <div class="carousel">
            <div class="carousel_inner">
                <div class="bwd">
                    <p>&#9204;</p>
                </div>
                <div class="the_container"></div>
                <div class="fwd">
                    <p>&#9205;</p>
                </div>
            </div>
            <div class="preview_pics_container"></div>
        </div>
    </section>

    <template>
        <section>
            <img class="car_imgs" src="" alt="">
        </section>
    </template>


    <footer>
        <ul>
            <li><a>Nyheder</a></li>
            <li><a>Presse</a></li>
            <li><a>Cookies og privatlivspolitik</a></li>
            <li><a href="faq.html">Ofte stillede spørgsmål</a></li>

        </ul>
        <div>
            <a href="https://www.facebook.com/enogtyvefem"><i class="fab fa-facebook-square fa-3x"></i></a>
            <a href="https://www.instagram.com/215moments/?hl=da"><i class="fab fa-instagram fa-3x"></i></a>
        </div>
    </footer>


    <script>
        const parisPics = "http://ianachristiansen.dk/21_5/wordpress/wp-json/wp/v2/bolig/727";
        const mallorcaPics = "http://ianachristiansen.dk/21_5/wordpress/wp-json/wp/v2/bolig/539";
        const barcelonaPics = "http://ianachristiansen.dk/21_5/wordpress/wp-json/wp/v2/bolig/622";
        const chamonixPics = "http://ianachristiansen.dk/21_5/wordpress/wp-json/wp/v2/bolig/645";
        const sydfrankrigPics = "http://ianachristiansen.dk/21_5/wordpress/wp-json/wp/v2/bolig/659";
        const toscanaPics = "http://ianachristiansen.dk/21_5/wordpress/wp-json/wp/v2/bolig/687";
        const sydspanienPics = "http://ianachristiansen.dk/21_5/wordpress/wp-json/wp/v2/bolig/841";
        const theContainer = document.querySelector(".the_container");
        let numberOfPicsInCarousel;
        let carouCurrentNum = 0;
        //Går op og får URL'en
        const Urlparameter = new URLSearchParams(window.location.search);

        //Giv mig den del af parameteret der er ID'et
        const id = Urlparameter.get("id");

        const detalje = document.querySelector(".detalje");
        let destination;

        document.addEventListener("DOMContentLoaded", start);

        function start() {
            hentData();

            document.querySelector(".fwd").addEventListener("click", fwd);
            document.querySelector(".bwd").addEventListener("click", bwd);
        }

        async function hentData() {
            let jsonData = await fetch(`http://ianachristiansen.dk/21_5/wordpress/wp-json/wp/v2/destination/${id}`);

            destination = await jsonData.json();

            visDestination();

            const parisResponse = await fetch(parisPics);
            parisJSON = await parisResponse.json();
            const mallorcaResponse = await fetch(mallorcaPics);
            mallorcaJSON = await mallorcaResponse.json();
            const barcelonaResponse = await fetch(barcelonaPics);
            barcelonaJSON = await barcelonaResponse.json();
            const chamonixResponse = await fetch(chamonixPics);
            chamonixJSON = await chamonixResponse.json();
            const sydfrankrigResponse = await fetch(sydfrankrigPics);
            sydfrankrigJSON = await sydfrankrigResponse.json();
            const toscanaResponse = await fetch(toscanaPics);
            toscanaJSON = await toscanaResponse.json();
            const sydspanienResponse = await fetch(sydspanienPics);
            sydspanienJSON = await sydspanienResponse.json();
            buildCarousel();
        }

        //sammenligner med det ID vi har fået tilsendt oppe i URL'en
        function visDestination() {

            detalje.querySelector("button").addEventListener("click", () => {
                history.back();
            });

            detalje.querySelector("h1").textContent = destination.title.rendered;
            detalje.querySelector("p").innerHTML = destination.content.rendered;
        }


        /* HERFRA OG NED ER GALLERY RELATED */
        function buildCarousel() {

            if (id == 31) {
                numberOfPicsInCarousel = parisJSON.bolig_img.length;

                parisJSON.bolig_img.forEach((bolig_img, index) => {
                    const theClone = document.querySelector("template").cloneNode(true).content;
                    const secondClone = document.querySelector("template").cloneNode(true).content;

                    theClone.querySelector("img").src = bolig_img.guid;
                    secondClone.querySelector("img").src = bolig_img.guid;
                    secondClone.querySelector("section").dataset.myIndex = index;

                    document.querySelector(".carousel_title").innerHTML = parisJSON.title.rendered;
                    document.querySelector(".carousel_content").innerHTML = parisJSON.content.rendered;

                    theContainer.appendChild(theClone);
                    document.querySelector(".preview_pics_container").appendChild(secondClone);
                })


                document.querySelector(".fwd p").style.display = "block";
                document.querySelector(".bwd p").style.display = "block";

                document.querySelector(".preview_pics_container section").classList.add("preview_selected");

                theContainer.addEventListener("scroll", scrollFunc);
                document.querySelectorAll(".preview_pics_container section").forEach(each => {
                    each.addEventListener("click", previewClick);
                })
            }

            if (id == 13) {
                numberOfPicsInCarousel = mallorcaJSON.bolig_img.length;

                mallorcaJSON.bolig_img.forEach((bolig_img, index) => {
                    const theClone = document.querySelector("template").cloneNode(true).content;
                    const secondClone = document.querySelector("template").cloneNode(true).content;

                    theClone.querySelector("img").src = bolig_img.guid;
                    secondClone.querySelector("img").src = bolig_img.guid;
                    secondClone.querySelector("section").dataset.myIndex = index;

                    document.querySelector(".carousel_title").innerHTML = mallorcaJSON.title.rendered;
                    document.querySelector(".carousel_content").innerHTML = mallorcaJSON.content.rendered;

                    theContainer.appendChild(theClone);
                    document.querySelector(".preview_pics_container").appendChild(secondClone);
                })

                document.querySelector(".fwd p").style.display = "block";
                document.querySelector(".bwd p").style.display = "block";

                document.querySelector(".preview_pics_container section").classList.add("preview_selected");

                theContainer.addEventListener("scroll", scrollFunc);
                document.querySelectorAll(".preview_pics_container section").forEach(each => {
                    each.addEventListener("click", previewClick);
                })
            }

            if (id == 30) {
                numberOfPicsInCarousel = barcelonaJSON.bolig_img.length;

                barcelonaJSON.bolig_img.forEach((bolig_img, index) => {
                    const theClone = document.querySelector("template").cloneNode(true).content;
                    const secondClone = document.querySelector("template").cloneNode(true).content;

                    theClone.querySelector("img").src = bolig_img.guid;
                    secondClone.querySelector("img").src = bolig_img.guid;
                    secondClone.querySelector("section").dataset.myIndex = index;

                    document.querySelector(".carousel_title").innerHTML = barcelonaJSON.title.rendered;
                    document.querySelector(".carousel_content").innerHTML = barcelonaJSON.content.rendered;

                    theContainer.appendChild(theClone);
                    document.querySelector(".preview_pics_container").appendChild(secondClone);
                })

                document.querySelector(".fwd p").style.display = "block";
                document.querySelector(".bwd p").style.display = "block";

                document.querySelector(".preview_pics_container section").classList.add("preview_selected");

                theContainer.addEventListener("scroll", scrollFunc);
                document.querySelectorAll(".preview_pics_container section").forEach(each => {
                    each.addEventListener("click", previewClick);
                })
            }

            if (id == 28) {
                numberOfPicsInCarousel = chamonixJSON.bolig_img.length;

                chamonixJSON.bolig_img.forEach((bolig_img, index) => {
                    const theClone = document.querySelector("template").cloneNode(true).content;
                    const secondClone = document.querySelector("template").cloneNode(true).content;

                    theClone.querySelector("img").src = bolig_img.guid;
                    secondClone.querySelector("img").src = bolig_img.guid;
                    secondClone.querySelector("section").dataset.myIndex = index;

                    document.querySelector(".carousel_title").innerHTML = chamonixJSON.title.rendered;
                    document.querySelector(".carousel_content").innerHTML = chamonixJSON.content.rendered;

                    theContainer.appendChild(theClone);
                    document.querySelector(".preview_pics_container").appendChild(secondClone);
                })

                document.querySelector(".fwd p").style.display = "block";
                document.querySelector(".bwd p").style.display = "block";

                document.querySelector(".preview_pics_container section").classList.add("preview_selected");

                theContainer.addEventListener("scroll", scrollFunc);
                document.querySelectorAll(".preview_pics_container section").forEach(each => {
                    each.addEventListener("click", previewClick);
                })
            }

            if (id == 26) {
                numberOfPicsInCarousel = sydfrankrigJSON.bolig_img.length;

                sydfrankrigJSON.bolig_img.forEach((bolig_img, index) => {
                    const theClone = document.querySelector("template").cloneNode(true).content;
                    const secondClone = document.querySelector("template").cloneNode(true).content;

                    theClone.querySelector("img").src = bolig_img.guid;
                    secondClone.querySelector("img").src = bolig_img.guid;
                    secondClone.querySelector("section").dataset.myIndex = index;

                    document.querySelector(".carousel_title").innerHTML = sydfrankrigJSON.title.rendered;
                    document.querySelector(".carousel_content").innerHTML = sydfrankrigJSON.content.rendered;

                    theContainer.appendChild(theClone);
                    document.querySelector(".preview_pics_container").appendChild(secondClone);
                })

                document.querySelector(".fwd p").style.display = "block";
                document.querySelector(".bwd p").style.display = "block";

                document.querySelector(".preview_pics_container section").classList.add("preview_selected");

                theContainer.addEventListener("scroll", scrollFunc);
                document.querySelectorAll(".preview_pics_container section").forEach(each => {
                    each.addEventListener("click", previewClick);
                })
            }

            if (id == 24) {
                numberOfPicsInCarousel = toscanaJSON.bolig_img.length;

                toscanaJSON.bolig_img.forEach((bolig_img, index) => {
                    const theClone = document.querySelector("template").cloneNode(true).content;
                    const secondClone = document.querySelector("template").cloneNode(true).content;

                    theClone.querySelector("img").src = bolig_img.guid;
                    secondClone.querySelector("img").src = bolig_img.guid;
                    secondClone.querySelector("section").dataset.myIndex = index;

                    document.querySelector(".carousel_title").innerHTML = toscanaJSON.title.rendered;
                    document.querySelector(".carousel_content").innerHTML = toscanaJSON.content.rendered;

                    theContainer.appendChild(theClone);
                    document.querySelector(".preview_pics_container").appendChild(secondClone);
                })

                document.querySelector(".fwd p").style.display = "block";
                document.querySelector(".bwd p").style.display = "block";

                document.querySelector(".preview_pics_container section").classList.add("preview_selected");

                theContainer.addEventListener("scroll", scrollFunc);
                document.querySelectorAll(".preview_pics_container section").forEach(each => {
                    each.addEventListener("click", previewClick);
                })
            }

            if (id == 15) {
                numberOfPicsInCarousel = sydspanienJSON.bolig_img.length;

                sydspanienJSON.bolig_img.forEach((bolig_img, index) => {
                    const theClone = document.querySelector("template").cloneNode(true).content;
                    const secondClone = document.querySelector("template").cloneNode(true).content;

                    theClone.querySelector("img").src = bolig_img.guid;
                    secondClone.querySelector("img").src = bolig_img.guid;
                    secondClone.querySelector("section").dataset.myIndex = index;

                    document.querySelector(".carousel_title").innerHTML = sydspanienJSON.title.rendered;
                    document.querySelector(".carousel_content").innerHTML = sydspanienJSON.content.rendered;

                    theContainer.appendChild(theClone);
                    document.querySelector(".preview_pics_container").appendChild(secondClone);
                })

                document.querySelector(".fwd p").style.display = "block";
                document.querySelector(".bwd p").style.display = "block";

                document.querySelector(".preview_pics_container section").classList.add("preview_selected");

                theContainer.addEventListener("scroll", scrollFunc);
                document.querySelectorAll(".preview_pics_container section").forEach(each => {
                    each.addEventListener("click", previewClick);
                })
            }
        }

        function scrollFunc() {
            document.querySelectorAll(".preview_pics_container section").forEach(each => {
                each.classList.remove("preview_selected")
            })
            carouCurrentNum = Math.round(theContainer.scrollLeft / document.querySelector(".car_imgs").width);
            document.querySelector(`.preview_pics_container section:nth-child(${carouCurrentNum+1})`).classList.add("preview_selected");
            setBtns();
        }

        function previewClick(evt) {
            carouCurrentNum = evt.currentTarget.dataset.myIndex;
            navigate();
        }

        function fwd() {
            if (carouCurrentNum < numberOfPicsInCarousel - 1) {
                carouCurrentNum++;
                navigate();
            }
        }

        function bwd() {
            if (carouCurrentNum > 0) {
                carouCurrentNum--;
                navigate();
            }
        }

        function navigate() {
            theContainer.scrollTo({
                left: carouCurrentNum * document.querySelector(".car_imgs").width,
                behavior: "smooth"
            })
            setBtns();
        }

        function setBtns() {
            if (carouCurrentNum < numberOfPicsInCarousel - 1) {
                document.querySelector(".fwd").style.opacity = 1;
                document.querySelector(".fwd").style.cursor = "pointer";
            } else {
                document.querySelector(".fwd").style.opacity = 0.3;
                document.querySelector(".fwd").style.cursor = "default";
            }
            if (carouCurrentNum > 0) {
                document.querySelector(".bwd").style.opacity = 1;
                document.querySelector(".bwd").style.cursor = "pointer";

            } else {
                document.querySelector(".bwd").style.opacity = 0.3;
                document.querySelector(".bwd").style.cursor = "default";
            }

        }
    </script>
    <script src="burger.js"></script>
</body></html>
